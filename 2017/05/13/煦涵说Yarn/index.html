
<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge,chrome=1">
    <meta name="author" content="煦涵" />
    <meta name="designer" content="煦涵" />
    <meta name="description" content="崇尚开源，热爱分享，极客精神，持续学习">
    <meta name="keywords" content="FED，前端开发，用户体验，nodejs，webpack，vue，react">
    <meta name="rating" content="general" /> 
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="format-detection" content="telephone=yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="robots" content="index, follow" />

    <meta id="Copyright" content="Copyright 2015-2017 Fedlab. All Rights Reserved">
    <meta name="format-detection" content="telephone=no">


    <link type="image/x-icon" href="/favicon.ico" rel="icon">
    <link type="image/x-icon" href="/favicon.ico" rel="Shortcut Icon">
    <link type="image/x-icon" href="/favicon.ico" rel="bookmark">
    <link rel="apple-touch-icon-precomposed" href="/touch-translation.png">
    
        <title>煦涵说Yarn - FED实验室</title>
    
    <link rel="stylesheet" href="/css/fedlab.css">
</head>


<body>
    
<header class="fedlab-header white">
    <div class="fedlab-header-inner">
        <div class="fedlab-header-logo">
            <a href="/">FEDLAB(前端开发实验室)</a>
        </div>
        <nav class="fedlab-header-nav">
    <ul class="fedlab-header-nav-list">
        <li class="fedlab-header-nav-item current">
            <a href="/">首页</a></li>
        <li class="fedlab-header-nav-item">
            <a href="/content.html">文档</a>
        </li>
        <li class="fedlab-header-nav-item">
            <a href="/about.html">我们</a>
        </li>
    </ul>
</nav>

        <div class="fedlab-header-search">
            <button class="fedlab-header-search-btn icon icon-search" type="button" title="搜索">搜索</button>
            <div class="fedlab-header-search-form">
                <button type="button" class="fedlab-header-search-icon icon icon-search">搜索</button>
                <input type="text" class="fedlab-header-search-text" placeholder="请输入想要搜索的内容">
                <button type="button" class="fedlab-header-search-clear icon icon-clear">关闭</button>
            </div>
        </div>
    </div>
</header>
    
    
<div class="fedlab-main fedlab-article">
    <div class="fedlab-article-details">
        <div class="fedlab-article-con">
            <div class="fedlab-article-con-title">
                <h3 title="煦涵说Yarn">煦涵说Yarn</h3>
            </div>
            <p class="fedlab-article-con-meta">By <a href="https://github.com/zuojj" target="_blank">煦涵</a> At 2017-05-13 05:00:00</p>
            <div class="fedlab-article-con-banner">
                <img src="http://www.zuojj.com/wp-content/uploads/2017/05/0.jpeg" alt="煦涵说Yarn">
            </div>
            <div class="fedlab-article-con-text">
                <div class="content-text">
                <p><a href="https://yarnpkg.com" target="_blank" rel="external">Yarn</a>是一个新的Javascript包管理器，它由Facebook, Google, Exponent and Tilde开发者共同开发完成。Yarn 不是 NPM 的fork版本，而是它的重新设计，Yarn 定位为”快速、可靠、安全的依赖管理工具”，它的目标是解决团队开发中使用 NPM 遇到的问题。</p>
<p>随着 Yarn 的诞生，越来越多的开发者转向了 Yarn，那么 NPM 在开发中有哪些问题，Yarn 是如何解决的呢？<br>NPM 一些潜在的问题:</p>
<ul>
<li>嵌套依赖 (npm 3.0版本已修复)</li>
<li>串行安装</li>
<li>单一个 package 来源（npmjs.com）</li>
<li>需要网络来安装软件包（尽管我们可以创建一个临时缓存）</li>
<li>允许程序包在安装时运行代码（不利于安全性）</li>
<li>不确定的包状态（不能确定项目的所有副本使用相同的包版本）</li>
</ul>
<p>Yarn 解决方案:</p>
<ul>
<li>单依赖包结构: 可以使用单一版本的依赖包，安装更快速，占用磁盘空间更少</li>
<li>并行安装: 并行下载依赖包，减少下载时间</li>
<li>多个包来源: Yarn 读取和安装 npmjs.com 和 Bower安装包，如果有个渠道down掉了，可以从另一个渠道下载包并安装</li>
<li>自动重试: 单个网络请求失败不会导致安装失败，请求在失败后会重试，这解决了由于临时网络问题而产生的构建异常</li>
<li>兼容 NPM: 从 NPM 切换到 Yarn 不需要做特殊兼容处理</li>
<li>yarn.lock: 用来管理 javascript 包，这个对于开发团队来说可能是最有用的功能了。 在package.json中，依赖的包版本可以被指定为一个范围，也可以不带版本号。这个可能会导致一种问题，团队内不同开发人员使用不同版本的软件包。我们都知道，复现环境的能力与完全相关的依赖关系对于高校的调试和新团队人员的融入至关重要。从包管理器（Bundler）中借鉴，Yarn 创建了 yarn.lock文件，用来记录项目使用每个包的确切版本。当将此文件提交至 SVN、GIT 等代码维护工具，可以保证项目的所有开发人员共享一套依赖包的版本号。</li>
</ul>
<h2 id="Yarn-的安装"><a href="#Yarn-的安装" class="headerlink" title="Yarn 的安装"></a>Yarn 的安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">brew install yarn</div><div class="line"></div><div class="line">/* Yarn 团队不推荐 */</div><div class="line">npm install -g yarn</div></pre></td></tr></table></figure>
<p>不同平台安装方式各异，具体参见<a href="https://yarnpkg.com/zh-Hans/docs/install" target="_blank" rel="external">install</a></p>
<h2 id="NPM-CLI-vs-Yarn-CLI"><a href="#NPM-CLI-vs-Yarn-CLI" class="headerlink" title="NPM CLI vs Yarn CLI"></a>NPM CLI vs Yarn CLI</h2><ul>
<li><p>初始化项目</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm  init</div><div class="line">yarn init</div></pre></td></tr></table></figure>
</li>
<li><p>从 package.json 安装依赖</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm install</div><div class="line">yarn</div></pre></td></tr></table></figure>
</li>
<li><p>安装指定包到依赖或者开发依赖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">npm install --save [package]</div><div class="line">yarn add [package]</div><div class="line"></div><div class="line">npm install --save-dev [package]</div><div class="line">yarn add [package] [--dev/-D]</div></pre></td></tr></table></figure>
</li>
<li><p>安装包到全局</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm install --global [package]</div><div class="line">yarn global add [package]</div></pre></td></tr></table></figure>
</li>
<li><p>安装指定版本的包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm install [package]@[version]</div><div class="line">yarn add [package]@[version]</div></pre></td></tr></table></figure>
</li>
<li><p>重新下载所有包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm reubild</div><div class="line">yarn install --force</div></pre></td></tr></table></figure>
</li>
<li><p>卸载包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">npm uninstall [package]</div><div class="line"></div><div class="line">npm uninstall --save [package]</div><div class="line">yarn remove [package]</div><div class="line"></div><div class="line">npm uninstall --save-dev [package]</div></pre></td></tr></table></figure>
</li>
<li><p>升级包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rm -rf node_modules &amp;&amp; npm install</div><div class="line">yarn upgrade</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>相比 NPM，Yarn解决了不确定依赖、网络问题、并行下载等问题。然而 NPM 是自己成功的牺牲品，随着越来越多的开发者转移使用 Yarn或者其他依赖平台，NPM 服务器可以更有效的使用。总之两个包管理器都很优秀，这种相互的关系，驱使着各自彼此往更优秀的方向前进，以惠及更多的开发者。</p>
<p>感谢您的阅读</p>

                </div>
            </div>
            <div class="fedlab-article-con-reprint">
                <p>
                    <span>感谢你的阅读，本文出自</span><a href="https://fedlab-team.github.io/" hidefocus="true">FED实验室</a>，转载时请注明出处，谢谢合作。
                    <br> 格式为：FED实验室（
                    <a href="/2017/05/13/煦涵说Yarn/" hidefocus="true">https://fedlab-team.github.io/2017/05/13/煦涵说Yarn/</a>）
                </p>
            </div>
            
            <div class="fedlab-article-con-prevnext">
                
                <p class="prev-page">上一篇: <a href="/2017/05/20/煦涵说Flow/" title="煦涵说Flow" rel="prev" hidefocus="true">煦涵说Flow</a></p>
                
                
                <p class="next-page">下一篇: <a href="/2017/04/30/煦涵说JSON/" title="煦涵说JSON" rel="next" hidefocus="true">煦涵说JSON</a></p>
                
            </div>
            
        </div>
    </div>
    <div class="fedlab-sidebar">
        <section class="fedlab-sidebar-qrcode">
            <div class="sec-content">
                <img src="http://www.zuojj.com/wp-content/uploads/2017/05/fedlab_qrcode.jpg">
            </div>
        </section>
        <section class="fedlab-sidebar-favlinks">
            <div class="sec-title">
                <h3>友情链接</h3>
            </div>
            <div class="sec-content">
                <ul>
                    <li><a href="http://fedlab-team.github.io">FED实验室</a></li>
                    <li><a href="http://www.zuojj.com">煦涵</a></li>
                    <li><a href="http://fedlab-team.github.io">FED实验室</a></li>
                    <li><a href="http://www.zuojj.com">煦涵</a></li>
                </ul>
            </div>
        </section>
    </div>
</div>
    <footer class="fedlab-footer">
    <div class="fedlab-footer-inner">
        <div class="fedlab-copyright">
            <p>Copyright © 2015 - 2017 FEDLAB.</p>
        </div>
    </div>
</footer>
    <div class="fedlab-backtop">返回顶部</div>
    <script src="/js/index.js"></script>
</body>

</html>