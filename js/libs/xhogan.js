!function(t,n,i,o){t.support&&(t.support.cors=!0),o.heredoc=function(t){return t.toString().split("\n").slice(1,-1).join("\n")+"\n"},o.toHtml=function(t,i,o){return t=n.compile(t),t.render(i,o)},o.render=function(t){t=l(t),new d(t).render(t.extraTplData)};var e=function(t){return typeof t},s=function(t){window.console&&window.console.log&&window.console.log(t)},r=function(t){return"string"===e(t)&&(0===t.indexOf("http://")||0===t.indexOf("https://"))},a=window.localStorage||{},p={target:"body",tpl:"#xhoganTpl",data:{},tplVersion:"1",dataVersion:"1",appendToTarget:!0,dataType:"json",cbk:function(t,n,i,o){}},l=function(n){return n=t.extend({},p,n||{}),n.$target=t(n.target),n},d=function(t){this.opts=t,this.id=i.encode(t.target),this.init()};d.prototype={init:function(){this.isTplRemote=r(this.opts.tpl),this.isDataRemote=r(this.opts.data),this.tplId=this.isTplRemote?i.encode(this.opts.tpl):"localTpl",this.dataId=this.isDataRemote?i.encode(this.opts.data):"localData",this.tplKey=[this.id,this.tplId].join("-"),this.dataKey=[this.id,this.dataId].join("-"),this.tplVersionKey=this.tplKey+"-Version",this.dataVersionKey=this.dataKey+"-Version"},render:function(t){var n=this;this.getHtml(function(t,i,o,e){if(t)return s("xhogan:在getHtml方法中发生错误->"+t),void(n.opts.cbk&&n.opts.cbk(t));n.opts.appendToTarget?n.opts.$target.append(i):n.opts.$target.html(i),n.opts.cbk&&n.opts.cbk(t,i,o,e)},t)},getHtml:function(t,n){var i=this;this.getTpl(this.opts.tpl,function(e,s){if(e)return void t(e);i.getData(i.opts.data,function(i,e){if(i)return void t(i);t(null,o.toHtml(s,e,n),s,e)})})},getTpl:function(n,i){if(0===n.indexOf("#"))return void i(null,t(n)[0].innerHTML);var o=this,e=a[this.tplVersionKey];if(e&&e===this.opts.tplVersion)return void i(null,a[this.tplKey]);t.ajax({url:n,cache:!1,success:function(t,n,e){a[o.tplVersionKey]=o.opts.tplVersion,a[o.tplKey]=t,i(null,t)},error:function(t,n,o){i(o)}})},getData:function(n,i){if("object"===e(n))return void i(null,n);var o=this,s=a[this.dataVersionKey];if(s&&s===this.opts.dataVersion)return void i(null,JSON.parse(a[this.dataKey]));t.ajax({crossDomain:!0,url:n,cache:!1,success:function(t,n,e){a[o.dataVersionKey]=o.opts.dataVersion,a[o.dataKey]=JSON.stringify(t),i(null,t)},error:function(t,n,o){i(o)}})}}}(window.jQuery||window.Zepto,Hogan,Base64,window.xhogan={});